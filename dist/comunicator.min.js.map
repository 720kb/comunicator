{"version":3,"file":"comunicator.min.js","sources":["../src/js/comunicator.js"],"names":["window","Comunicator","url","onTick","redoFunction","type","requestId","nextTimeWaitSliceChoice","this","chosenTimeWaitValue","websocket","readyState","WebSocket","OPEN","requestAnimationFrame","bind","sendPendingRequests","push","joinPendingRequests","timeWaitSlice","Math","pow","timeWaitSliceChoices","length","giveMeATimeWait","deferred","resolve","userIsPresent","whoami","token","whoReallyAmI","reallyToken","doJoin","console","info","broadcast","what","managed","toSend","who","send","sendTo","doClose","close","whoAmI","resolveComunicator","removeEventListener","eventToListen","exit","addEventListener","floor","random","joinPendingRequestsLength","aPendingRequest","onTickBoundedOnDoJoin","joinPendingRequestsIndex","JSON","stringify","opcode","cancelAnimationFrame","CONNECTING","initComunicator","sendMessage","onmessage","onWebsocketMessage","onclose","onWebsocketClose","event","eventToDispatch","parsedMsg","parse","data","CustomEvent","detail","dispatchEvent","sendPendingRequestsLength","onTickBoundedOnSend","sendPendingRequestsIndex","websocketUrl","that","onopen","Promise"],"mappings":"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"}