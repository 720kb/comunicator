{"version":3,"file":"comunicator-angular.min.js","sources":["../src/angular/comunicator.js","../src/js/comunicator.js","../src/js/raf.js"],"names":["angular","Comunicator","module","provider","comunicator","initComunicator","url","setComunicatorServerURL","$get","$rootScope","$window","$log","anEventToListen","arrivedJoined","$apply","scope","$emit","debug","arrivedToMe","event","detail","arrivedToAll","arrivedClosed","eventsToListen","domEvent","unregisterListeners","eventsToListenLength","length","eventsToListenIndex","resolveComunicator","unregisterListenersIndex","unregisterListenersLength","kickOffEvent","Event","dispatchEvent","addEventListener","$on","removeEventListener","push","promise","window","this","timeWaitSlice","timeWaitSliceChoices","chosenTimeWaitValue","sendPendingRequests","joinPendingRequests","giveMeATimeWait","Math","floor","random","onWebsocketMessage","eventToDispatch","parsedMsg","JSON","parse","data","opcode","CustomEvent","onWebsocketClose","whoReallyAmI","reallyToken","_doJoin","bind","sendMessage","requestId","sendPendingRequestsLength","aPendingRequest","onTickBoundedOnSend","_onTick","sendPendingRequestsIndex","websocket","readyState","WebSocket","OPEN","stringify","token","cancelAnimationFrame","console","requestAnimationFrame","websocketUrl","onopen","info","send","onmessage","onclose","redoFunction","type","nextTimeWaitSliceChoice","pow","joinPendingRequestsLength","onTickBoundedOnDoJoin","joinPendingRequestsIndex","whoami","CONNECTING","prototype","events","Array","isArray","deferred","resolve","userIsPresent","broadcast","what","toSend","who","sendTo","doClose","close","exit","Promise","lastTime","vendors","x","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout"],"mappings":"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"}