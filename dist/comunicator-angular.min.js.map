{"version":3,"file":"comunicator-angular.min.js","sources":["../src/angular/comunicator.js","../src/js/comunicator.js","../src/js/raf.js"],"names":["angular","Comunicator","module","provider","comunicator","initComunicator","url","setComunicatorServerURL","$get","$rootScope","$window","$log","anEventToListen","arrivedJoined","$apply","scope","$emit","debug","arrivedToMe","event","detail","arrivedToAll","arrivedClosed","eventsToListen","domEvent","unregisterListeners","eventsToListenLength","length","eventsToListenIndex","resolveComunicator","unregisterListenersIndex","unregisterListenersLength","kickOffEvent","Event","dispatchEvent","addEventListener","$on","removeEventListener","push","promise","window","this","websocketUrl","websocket","WebSocket","onopen","console","info","send","timeWaitSlice","timeWaitSliceChoices","chosenTimeWaitValue","sendPendingRequests","joinPendingRequests","giveMeATimeWait","Math","floor","random","prototype","events","Array","isArray","Promise","resolve","onTick","redoFunction","type","requestId","nextTimeWaitSliceChoice","readyState","OPEN","requestAnimationFrame","bind","pow","onWebsocketMessage","eventToDispatch","parsedMsg","JSON","parse","data","opcode","CustomEvent","onWebsocketClose","whoReallyAmI","reallyToken","doJoin","sendMessage","sendPendingRequestsLength","aPendingRequest","onTickBoundedOnSend","sendPendingRequestsIndex","stringify","token","cancelAnimationFrame","joinPendingRequestsLength","onTickBoundedOnDoJoin","joinPendingRequestsIndex","whoami","CONNECTING","onmessage","onclose","userIsPresent","broadcast","what","toSend","who","sendTo","doClose","close","exit","lastTime","vendors","x","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout"],"mappings":"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"}