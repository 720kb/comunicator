{"version":3,"file":"comunicator-min.js","sources":["../src/js/comunicator.js","../src/js/raf.js"],"names":["window","Comunicator","url","this","timeWaitSlice","timeWaitSliceChoices","chosenTimeWaitValue","sendPendingRequests","joinPendingRequests","giveMeATimeWait","Math","floor","random","length","onWebsocketMessage","event","eventToDispatch","parsedMsg","JSON","parse","data","opcode","CustomEvent","detail","dispatchEvent","onWebsocketClose","whoReallyAmI","reallyToken","_doJoin","bind","sendMessage","requestId","sendPendingRequestsLength","aPendingRequest","onTickBoundedOnSend","_onTick","sendPendingRequestsIndex","websocket","readyState","WebSocket","OPEN","push","stringify","token","cancelAnimationFrame","console","debug","requestAnimationFrame","initComunicator","websocketUrl","onopen","info","send","onmessage","onclose","redoFunction","type","nextTimeWaitSliceChoice","pow","joinPendingRequestsLength","onTickBoundedOnDoJoin","joinPendingRequestsIndex","whoami","CONNECTING","prototype","promise","events","Array","isArray","deferred","resolve","eventsToListenIndex","anEventToListen","eventsToListenLength","userIsPresent","broadcast","what","toSend","who","sendTo","doClose","close","resolveComunicator","removeEventListener","exit","addEventListener","Promise","lastTime","vendors","x","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout"],"mappings":";;;;;;;;CACC,SAAoBA,GACnB,YAEA,IAAIC,GAAc,QAASA,GAAYC,GAEnCC,KAAKC,cAAgB,GACrBD,KAAKE,sBAAwB,GAC7BF,KAAKG,oBAAsB,EAC3BH,KAAKI,uBACLJ,KAAKK,uBACLL,KAAKM,gBAAkB,WAErB,MAAOC,MAAKC,MAAMD,KAAKE,UAAYT,KAAKE,qBAAqBQ,OAAS,KAExEV,KAAKW,mBAAqB,SAA4BC,GAEpD,GACIC,GADAC,EAAYjB,EAAOkB,KAAKC,MAAMJ,EAAMK,KAaxC,IAXyB,WAArBH,EAAUI,OAEZL,EAAkB,GAAIhB,GAAOsB,YAAY,sBACX,SAArBL,EAAUI,OAEnBL,EAAkB,GAAIhB,GAAOsB,YAAY,oBAAqBC,OAAUN,IAC1C,gBAArBA,EAAUI,SAEnBL,EAAkB,GAAIhB,GAAOsB,YAAY,qBAAsBC,OAAUN,MAGvED,EAKF,KAAM,+CAHNhB,GAAOwB,cAAcR,IAMzBb,KAAKsB,iBAAmB,WAElBtB,KAAKuB,cACPvB,KAAKwB,cAEL3B,EAAOwB,cAAc,GAAIxB,GAAOsB,YAAY,uBAC5CrB,EAAY2B,QAAQC,KAAK1B,QAG7BA,KAAK2B,YAAc,SAAcT,EAAQD,GAEvC,GACIW,GAEAC,EACAC,EAJAC,EAAsBjC,EAAYkC,QAAQN,KAAK1B,KAAMA,KAAK2B,YAAYD,KAAK1B,KAAMkB,EAAQD,GAAO,QAEhGgB,EAA2B,CAG/B,IAAIjC,KAAKkC,UAAUC,aAAetC,EAAOuC,UAAUC,KAAM,CAQvD,IANArC,KAAKkC,UAAUI,KAAKvB,KAAKwB,WACvBrB,OAAUA,EACVsB,MAASxC,KAAKwB,YACdP,KAAQA,KAGLgB,EAA2B,EAAGJ,EAA4B7B,KAAKI,oBAAoBM,OAAmCmB,EAA3BI,EAAsDA,GAA4B,EAEhLH,EAAkB9B,KAAKI,oBAAoB6B,GAC3CpC,EAAO4C,qBAAqBX,EAE9B9B,MAAKI,2BAGLP,GAAO6C,QAAQC,MAAM,qDACrBf,EAAY/B,EAAO+C,sBAAsBb,GACzC/B,KAAKI,oBAAoBkC,KAAKV,IAGlC5B,KAAK6C,gBAAkB,SAAyBC,GAC9C,IAAIA,EASF,KAAM,6BAPN9C,MAAKkC,UAAY,GAAIrC,GAAOuC,UAAUU,GACtC9C,KAAKkC,UAAUa,OAAS,WAEtBlD,EAAO6C,QAAQM,KAAK,WAAYhD,KAAM,YAO1CA,KAAKkC,UAAUI,KAAOtC,KAAKkC,UAAUe,KACrCjD,KAAKkC,UAAUe,KAAOjD,KAAK2B,YAAYD,KAAK1B,MAC5CA,KAAKkC,UAAUgB,UAAYlD,KAAKW,mBAAmBe,KAAK1B,MACxDA,KAAKkC,UAAUiB,QAAUnD,KAAKsB,iBAAiBI,KAAK1B,OAGtDA,KAAK6C,gBAAgB9C,GAGzBD,GAAYkC,QAAU,QAASA,GAAQoB,EAAcC,GAEnD,GAAIzB,GACA0B,CACAtD,MAAKG,oBAAsB,GAC7BH,KAAKkC,UAAUC,aAAetC,EAAOuC,UAAUC,MAE/CrC,KAAKG,qBAAuB,EAC5BN,EAAO6C,QAAQC,MAAM,wCACrBf,EAAY/B,EAAO+C,sBAAsBZ,EAAQN,KAAK1B,KAAMoD,EAAcC,IAC7D,SAATA,EAEFrD,KAAKI,oBAAoBkC,KAAKV,GAG9B5B,KAAKK,oBAAoBiC,KAAKV,KAIhC0B,EAA0BtD,KAAKC,eAAiBM,KAAKgD,IAAI,EAAGvD,KAAKE,qBAAqBQ,QAAU,GAChGV,KAAKE,qBAAqBoC,KAAKgB,GAC/BtD,KAAKG,oBAAsBH,KAAKM,kBAChCT,EAAO6C,QAAQC,MAAM,0BAA2B3C,KAAKG,qBACrDiD,MAIJtD,EAAY2B,QAAU,QAASA,KAE7B,GACIG,GAEA4B,EACA1B,EAJA2B,EAAwB3D,EAAYkC,QAAQN,KAAK1B,KAAMyB,EAAS,QAEhEiC,EAA2B,CAG/B,IAAI1D,KAAKkC,UAAUC,aAAetC,EAAOuC,UAAUC,KAAM,CAQvD,IANArC,KAAKkC,UAAUI,KAAKvB,KAAKwB,WACvBrB,OAAU,OACVyC,OAAU3D,KAAKuB,aACfiB,MAASxC,KAAKwB,eAGXkC,EAA2B,EAAGF,EAA4BxD,KAAKK,oBAAoBK,OAAmC8C,EAA3BE,EAAsDA,GAA4B,EAEhL5B,EAAkB9B,KAAKK,oBAAoBqD,GAC3C7D,EAAO4C,qBAAqBX,EAE9B9B,MAAKK,2BACIL,MAAKkC,UAAUC,aAAetC,EAAOuC,UAAUwB,YAExD/D,EAAO6C,QAAQM,KAAK,yDACpBpB,EAAY/B,EAAO+C,sBAAsBa,GACzCzD,KAAKK,oBAAoBiC,KAAKV,KAG9B/B,EAAO6C,QAAQM,KAAK,uDACpBhD,KAAK6C,gBAAgB7C,KAAKkC,UAAUnC,KACpCC,KAAKkC,UAAUe,KAAOjD,KAAK2B,YAAYD,KAAK1B,MAC5CA,KAAKkC,UAAUgB,UAAYlD,KAAKW,mBAAmBe,KAAK1B,MACxDA,KAAKkC,UAAUiB,QAAUnD,KAAKsB,iBAAiBI,KAAK1B,MACpD4B,EAAY/B,EAAO+C,sBAAsBa,GACzCzD,KAAKK,oBAAoBiC,KAAKV,KAIlC9B,EAAY+D,UAAUC,QAAU,SAAiBC,GAE/C,IAAK/D,KAAKkC,UAER,KAAM,+CAGR,IAAI6B,GACFC,MAAMC,QAAQF,GAAS,CAEvB,GAAIG,GAAW,SAAkBC,GAE7B,GACIC,GACAC,EAFAC,EAAuBP,EAAOrD,OAG9B6D,EAAgB,SAAuBZ,EAAQnB,GAI7C,GAFAxC,KAAKuB,aAAeoC,EACpB3D,KAAKwB,YAAcgB,GACfxC,KAAKuB,eACPvB,KAAKwB,YAKL,KAAM,oCAHN1B,GAAY2B,QAAQC,KAAK1B,OAM7BwE,EAAY,SAAmBC,GAE7B,IAAIzE,KAAKuB,eACPvB,KAAKkC,UAWL,KAAM,8BATN,IAAIwC,IACFf,OAAU3D,KAAKuB,aACfoD,IAAO,IACPF,KAAQA,EAGVzE,MAAKkC,UAAUe,KAAK,YAAayB,IAMrCE,EAAS,SAAgBD,EAAKF,GAE5B,IAAIzE,KAAKuB,eACPvB,KAAKkC,UAWL,KAAM,8BATN,IAAIwC,IACFf,OAAU3D,KAAKuB,aACfoD,IAAOA,EACPF,KAAQA,EAGVzE,MAAKkC,UAAUe,KAAK,SAAUyB,IAMlCG,EAAU,WAEJ7E,KAAKkC,UAAUC,aAAetC,EAAOuC,UAAUC,MAEjDrC,KAAKkC,UAAU4C,SAGnBC,EAAqB,QAASA,KAE5B,IAAKX,EAAsB,EAAyBE,EAAtBF,EAA4CA,GAAuB,EAE/FC,EAAkBN,EAAOK,GACrBC,GAEFxE,EAAOmF,oBAAoBX,EAAiBU,GAAoB,EAIpEZ,IACEI,cAAiBA,EACjBC,UAAaA,EACbI,OAAUA,EACVK,KAAQJ,IAIhB,KAAKT,EAAsB,EAAyBE,EAAtBF,EAA4CA,GAAuB,EAE/FC,EAAkBN,EAAOK,GACrBC,GAEFxE,EAAOqF,iBAAiBb,EAAiBU,GAAoB,GAIrE,OAAO,IAAII,SAAQjB,EAASxC,KAAK1B,OAGnC,KAAM,+CAGRH,EAAOC,YAAcA,GACrBD,QCrQD,SAAqBA,GACpB,YAMA,KAJA,GAAIuF,GAAW,EACXC,GAAW,KAAM,MAAO,SAAU,KAClCC,EAAI,EAEDA,EAAID,EAAQ3E,SAAWb,EAAO+C,sBAAuB0C,GAAK,EAE/DzF,EAAO+C,sBAAwB/C,EAAOwF,EAAQC,GAAK,yBACnDzF,EAAO4C,qBAAuB5C,EAAOwF,EAAQC,GAAK,yBAA2BzF,EAAOwF,EAAQC,GAAK,8BAG9FzF,GAAO+C,wBAEV/C,EAAO+C,sBAAwB,SAAqB2C,GAClD,GAAIC,IAAW,GAAIC,OAAOC,UACtBC,EAAapF,KAAKqF,IAAI,EAAG,IAAMJ,EAAWJ,IAC1CS,EAAKhG,EAAOiG,WAAW,WACrBP,EAASC,EAAWG,IACnBA,EAGP,OADAP,GAAWI,EAAWG,EACfE,IAINhG,EAAO4C,uBAEV5C,EAAO4C,qBAAuB,SAAqBoD,GACjDhG,EAAOkG,aAAaF,MAGxBhG"}