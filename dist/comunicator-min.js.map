{"version":3,"file":"comunicator-min.js","sources":["../src/js/comunicator.js","../src/js/raf.js"],"names":["window","Comunicator","url","this","initComunicator","websocketUrl","websocket","WebSocket","onopen","console","info","push","send","timeWaitSlice","timeWaitSliceChoices","chosenTimeWaitValue","sendPendingRequests","joinPendingRequests","giveMeATimeWait","Math","floor","random","length","prototype","promise","events","Array","isArray","deferred","resolve","eventsToListenIndex","anEventToListen","eventsToListenLength","onTick","redoFunction","type","requestId","nextTimeWaitSliceChoice","readyState","OPEN","debug","requestAnimationFrame","bind","pow","onWebsocketMessage","event","eventToDispatch","parsedMsg","JSON","parse","data","opcode","CustomEvent","detail","dispatchEvent","onWebsocketClose","whoReallyAmI","reallyToken","doJoin","sendMessage","sendPendingRequestsLength","aPendingRequest","onTickBoundedOnSend","sendPendingRequestsIndex","stringify","token","cancelAnimationFrame","joinPendingRequestsLength","onTickBoundedOnDoJoin","joinPendingRequestsIndex","whoami","CONNECTING","onmessage","onclose","userIsPresent","broadcast","what","toSend","who","sendTo","doClose","close","resolveComunicator","removeEventListener","exit","addEventListener","Promise","lastTime","vendors","x","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout"],"mappings":"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"}