{"version":3,"file":"notifier-angular.min.js","sources":["../src/angular/notifier.js"],"names":["angular","window","module","provider","websocket","deferred","timeWaitSlice","timeWaitSliceChoices","giveMeATimeWait","Math","floor","random","length","setNotifierServerURL","url","WebSocket","onopen","console","info","this","error","push","send","$get","$window","$rootScope","$timeout","$log","$q","defer","complainMessage","whoReallyAmI","reallyToken","nextTimeWaitSliceChoice","anEventToListen","chosenTimeWaitValue","sendPendingRequests","joinPendingRequests","onTick","redoFunction","type","readyState","OPEN","requestId","requestAnimationFrame","bind","pow","onWebsocketMessage","event","parsedMsg","JSON","parse","data","opcode","$emit","onWebsocketClose","doJoin","sendMessage","sendPendingRequestsLength","aPendingRequest","onTickBoundedOnSend","sendPendingRequestsIndex","stringify","token","cancelAnimationFrame","joinPendingRequestsLength","onTickBoundedOnDoJoin","joinPendingRequestsIndex","whoami","CONNECTING","onmessage","onclose","userIsPresent","broadcast","what","toSend","who","sendTo","doClose","close","eventsToListen","unregisterListeners","eventsToListenLength","eventsToListenIndex","resolveNotifier","unregisterListenersIndex","unregisterListenersLength","resolve","exit","$on","reject","promise","lastTime","vendors","x","callback","currTime","Date","getTime","timeToCall","max","id","setTimeout","clearTimeout"],"mappings":"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"}